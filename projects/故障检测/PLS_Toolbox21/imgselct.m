function [xinds,yinds] = imgselct%IMGSELCT Select an area on an image and return the pixel indices%  When invoked, IMGSELCT allows the user to draw a polygon%  on an image using the mouse. To close the polygon a%  "return" is used. The x indices (xinds) and y indices%  (yinds) are returned.%%I/O: [xinds,yinds] = imgselct;%%See also: IMGPCA, IMGSIMCA,  ISIMCAPR%Copyright Eigenvector Research, Inc. 1999-2000%bmw 4/99, 11/2000flag = 1;k = 0;ish = ishold;hold onwhile flag == 1  [x,y] = ginput(1);  if ~isempty(x)    k = k+1;    plot(x,y,'or','linewidth',2)    if k == 1      X = x;      Y = y;    else      X = [X; x];      Y = [Y; y];      plot(X(k-1:k),Y(k-1:k),'-r','linewidth',2)    end  else    flag = 0;  endendX = [X; X(1)];Y = [Y; Y(1)];plot(X(k:k+1),Y(k:k+1),'-r','linewidth',2)maxx = floor(max(X));minx = ceil(min(X));maxy = floor(max(Y));miny = ceil(min(Y));[xmat,ymat] = meshgrid(minx:maxx,miny:maxy);xmat = xmat(:);ymat = ymat(:);[xmat ymat];in = inpolygon(xmat,ymat,X,Y);xinds = xmat(in);yinds = ymat(in);plot(xinds,yinds,'.b')if ish == 0  hold offend      